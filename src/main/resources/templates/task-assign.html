<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header"></head>
<title th:text="'Assign task to: '+${recepient.username}"></title>

<body onload="setAssignerId()">
    <div th:replace="fragments/navigation :: navigation"></div>

    <div class="container">
        <h1><span class="glyphicon glyphicon-edit"></span> Assign task</h1>
        <form th:action="@{/task-assign(id=${recepient.id})}" th:object="${task}" method="post">
            <div class="panel panel-login">
                <div th:if="${param.notfound}">
                    <div class="alert alert-danger alert-dismissable">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        User not found
                    </div>
                </div>
                <div class="form-group">
                <div class="container">
                    <strong class="marginright">To: </strong>
                    <span id="recepient_id" th:text="${recepient.id}"></span>
                    <span style="font-size: 14px" th:text="${recepient.username}" class="label label-default">Primary</span>
                    <input id="receiver_id" th:field ="*{user.id}"/>
                </div>
                <hr/>
                    <label for="description" class="control-label col-sm-2">Description: </label>
                    <input id="description" type="text" autocomplete="off" th:field="*{description}"
                           class="form-control"
                           autofocus="autofocus"
                           required="required"
                           placeholder="Title"/>
                </div>
                <div class="form-group">
                    <label for="date" class="control-label col-md-3">Target date: </label>
                    <input id="date" type="date" name="date" th:field="*{targetDate}"
                           class="form-control"
                           required="required"
                           placeholder="MM/DD/YYYY"/>
                </div>
            </div>

            <div class="row">
                <div class="col-md-2">
                    <a th:href="@{/profile(id=${recepient.id})}" class="btn btn-default"><span class="glyphicon glyphicon-arrow-left"></span> Profile: <span th:text="${recepient.username}"></span></a>
                </div>
                <div class="col-md-8">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-sm-6 col-sm-offset-3">
                                <input type="submit"
                                       name="task-submit"
                                       id="task-submit"
                                       class="form-control btn btn-info"
                                       value="Assign task"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <script>
    function setAssignerId(){
    let receiver = document.getElementById("receiver_id");
    let receiver_id = document.getElementById("recepient_id");
    receiver.value = receiver_id.innerHTML;
    receiver.style.display="none";
    receiver_id.style.display = "none";
    }
    </script>
</body>
</html>